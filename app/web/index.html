<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FinSense AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="/static/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  </head>
  <body class="bg-slate-950 text-slate-100 font-[Inter]">
    <!-- Gradient header -->
    <header class="relative overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 opacity-30 animate-gradient"></div>
      <div class="max-w-7xl mx-auto p-6 relative">
        <div class="flex items-center justify-between">
          <h1 class="text-3xl md:text-4xl font-bold tracking-tight drop-shadow-sm">FinSense AI</h1>
          <div class="flex gap-2">
            <span class="px-3 py-1 rounded-full bg-slate-800/70 text-xs border border-slate-700">Live Demo</span>
            <span class="px-3 py-1 rounded-full bg-slate-800/70 text-xs border border-slate-700">Realtime</span>
          </div>
        </div>
        <p class="mt-2 text-slate-300 max-w-3xl">Explain markets, protect payments, and monitor behavior â€” all live. Prices and news stream in; alerts fire instantly with contextual explanations.</p>
      </div>
    </header>

    <main class="max-w-7xl mx-auto p-6 space-y-6">
      <!-- Live status + Ticker -->
      <div class="card animate__animated animate__fadeIn">
        <div class="flex flex-col gap-3">
          <div class="flex flex-wrap items-center gap-3">
            <div class="status-badge" id="statusMarket">
              <span class="dot"></span>
              Market WS
            </div>
            <div class="status-badge" id="statusAlerts">
              <span class="dot"></span>
              Alerts WS
            </div>
            <div class="ml-auto text-xs text-slate-400">Symbols: <span id="statusSymbols">TSLA, AAPL, GOOGL, MSFT, AMZN, NVDA, META, NFLX, AMD, UBER</span></div>
          </div>
          <div class="ticker" id="ticker">
            <div class="ticker-track" id="tickerTrack"></div>
          </div>
        </div>
      </div>
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Trading Buddy -->
  <section class="card animate__animated animate__fadeIn">
          <div class="flex items-center justify-between mb-3">
            <h2 class="section-title">Trading Buddy</h2>
            <div id="symbolChips" class="flex gap-2"></div>
          </div>
          <form id="ask-form" class="flex gap-2" onsubmit="return sendQuestion(event)">
            <input id="question" class="input flex-1" placeholder="Why did TSLA jump 5% just now?" />
            <button class="btn-primary">Ask</button>
          </form>
          <div id="answer" class="mt-4 space-y-2 min-h-[120px] max-h-[260px] overflow-auto pr-1">
            <!-- bubbles inserted here -->
          </div>
          <div class="mt-4">
            <canvas id="priceChart" height="140" class="rounded-md bg-slate-900/50 border border-slate-800"></canvas>
            <div id="chartSkeleton" class="skeleton h-[140px] -mt-[140px] rounded-md"></div>
          </div>
        </section>

        <!-- Live Market + News -->
        <section class="card animate__animated animate__fadeIn animate__delay-1s lg:col-span-2">
          <h2 class="section-title">Live Market + News</h2>
          <ul id="market" class="feed"></ul>
        </section>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Portfolio Risk Dashboard -->
        <section class="card animate__animated animate__fadeInLeft">
          <h2 class="section-title">Portfolio Risk Dashboard</h2>
          <form id="upload-form" class="flex flex-col gap-2" onsubmit="return uploadPortfolio(event)">
            <div class="flex items-center gap-2">
              <input type="file" id="portfolio" accept="application/json" class="input file:bg-slate-900 file:border-0 file:px-3 file:py-2 file:rounded-l-md text-sm" />
              <button class="btn-success">Upload</button>
            </div>
            <button type="button" class="btn-secondary" onclick="triggerFakeNews()">Trigger Demo Alert</button>
          </form>
          <pre class="hint">Example: {"AAPL": 10, "TSLA": 5}</pre>
        </section>

        <!-- Alerts -->
        <section class="card animate__animated animate__fadeInRight lg:col-span-2">
          <div class="flex items-center justify-between mb-3">
            <h2 class="section-title">Alerts</h2>
            <div class="text-xs text-slate-400">Total: <span id="alertsCount">0</span></div>
          </div>
          <ul id="alerts" class="feed max-h-64 overflow-y-auto"></ul>
        </section>
      </div>
    </main>

    <!-- Toasts -->
    <div id="toasts" class="fixed top-4 right-4 space-y-2 z-50"></div>

    <script src="/static/app.js"></script>
  </body>
</html>
